# é˜¿é‡Œäº‘OSSå›¾åºŠç³»ç»Ÿ PRDæ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›®åç§° | é˜¿é‡Œäº‘OSSå›¾åºŠç³»ç»Ÿ |
|---------|------------------|
| æ–‡æ¡£ç‰ˆæœ¬ | v1.0 |
| åˆ›å»ºæ—¥æœŸ | 2025-11-05 |
| æ–‡æ¡£çŠ¶æ€ | å¾…è¯„å®¡ |
| äº§å“è´Ÿè´£äºº | - |

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯

éšç€Markdownæ–‡æ¡£ç¼–å†™çš„æ™®åŠï¼Œå›¾ç‰‡ç®¡ç†æˆä¸ºäº†æŠ€æœ¯å†™ä½œè€…ã€åšå®¢ä½œè€…çš„ç—›ç‚¹é—®é¢˜ï¼š

- **æœ¬åœ°å›¾ç‰‡é—®é¢˜**ï¼šMarkdownæ–‡æ¡£ä½¿ç”¨æœ¬åœ°å›¾ç‰‡è·¯å¾„ï¼Œåˆ†äº«æ–‡æ¡£æ—¶å›¾ç‰‡æ— æ³•æ­£å¸¸æ˜¾ç¤º
- **å¹³å°è¿ç§»å›°éš¾**ï¼šä»ä¸€ä¸ªå¹³å°è¿ç§»åˆ°å¦ä¸€ä¸ªå¹³å°æ—¶ï¼Œå›¾ç‰‡é“¾æ¥å…¨éƒ¨å¤±æ•ˆ
- **å›¾ç‰‡ç®¡ç†æ··ä¹±**ï¼šå¤šå¹³å°å†™ä½œæ—¶ï¼Œå›¾ç‰‡åˆ†æ•£åœ¨å„å¤„ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†
- **ç›—é“¾é£é™©**ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹å…è´¹å›¾åºŠå­˜åœ¨ç›—é“¾ã€æœåŠ¡å…³é—­ç­‰é£é™©

### 1.2 äº§å“å®šä½

åŸºäºé˜¿é‡Œäº‘OSSæ„å»ºçš„**ä¸ªäºº/å›¢é˜Ÿå›¾åºŠç®¡ç†ç³»ç»Ÿ**ï¼Œæä¾›ï¼š

- æœ¬åœ°å›¾ç‰‡ä¸€é”®ä¸Šä¼ è‡³é˜¿é‡Œäº‘OSS
- è‡ªåŠ¨ç”ŸæˆMarkdownæ ¼å¼çš„å›¾åºŠé“¾æ¥
- æ”¯æŒæ‰¹é‡å¤„ç†å’Œå‘½ä»¤è¡Œæ“ä½œ
- ä½æˆæœ¬ã€é«˜å¯é çš„å›¾ç‰‡å­˜å‚¨æ–¹æ¡ˆ

### 1.3 æ ¸å¿ƒä»·å€¼

- **æˆæœ¬ä½å»‰**ï¼šé˜¿é‡Œäº‘OSSæŒ‰é‡è®¡è´¹ï¼Œä¸ªäººä½¿ç”¨å¹´è´¹çº¦10-50å…ƒ
- **ç¨³å®šå¯é **ï¼šé˜¿é‡Œäº‘åŸºç¡€è®¾æ–½ä¿éšœï¼Œ99.99%å¯ç”¨æ€§
- **ç»Ÿä¸€ç®¡ç†**ï¼šæ‰€æœ‰å›¾ç‰‡é›†ä¸­å­˜å‚¨ï¼Œä¾¿äºç®¡ç†å’Œè¿ç§»
- **ä¸€é”®è½¬æ¢**ï¼šæœ¬åœ°è·¯å¾„è‡ªåŠ¨è½¬æ¢ä¸ºMarkdownå›¾åºŠé“¾æ¥

## 2. ç›®æ ‡ç”¨æˆ·

### 2.1 ä¸»è¦ç”¨æˆ·ç¾¤ä½“

| ç”¨æˆ·ç±»å‹ | ä½¿ç”¨åœºæ™¯ | ç—›ç‚¹ |
|---------|---------|------|
| æŠ€æœ¯åšä¸» | æ’°å†™æŠ€æœ¯åšå®¢ï¼Œéœ€è¦æ’å…¥å¤§é‡æˆªå›¾å’Œç¤ºæ„å›¾ | å›¾ç‰‡ç®¡ç†æ··ä¹±ï¼Œè·¨å¹³å°å‘å¸ƒå›¾ç‰‡å¤±æ•ˆ |
| äº§å“ç»ç† | ç¼–å†™PRDæ–‡æ¡£ï¼Œéœ€è¦æ’å…¥äº§å“åŸå‹å’Œæµç¨‹å›¾ | æ–‡æ¡£åˆ†äº«æ—¶å›¾ç‰‡è·¯å¾„é—®é¢˜ |
| å¼€å‘è€… | GitHub READMEã€æŠ€æœ¯æ–‡æ¡£ç¼–å†™ | éœ€è¦ç¨³å®šçš„å›¾åºŠæ”¯æŒæ–‡æ¡£å›¾ç‰‡ |
| å†…å®¹åˆ›ä½œè€… | å…¬ä¼—å·ã€çŸ¥ä¹ç­‰å¹³å°å‘å¸ƒ | å¤šå¹³å°å‘å¸ƒéœ€è¦é‡å¤ä¸Šä¼ å›¾ç‰‡ |

### 2.2 ç”¨æˆ·ç”»åƒ

**å…¸å‹ç”¨æˆ·A - æŠ€æœ¯åšä¸»**
- å¹´é¾„ï¼š25-35å²
- èŒä¸šï¼šè½¯ä»¶å·¥ç¨‹å¸ˆ
- éœ€æ±‚ï¼šæ¯å‘¨å‘å¸ƒ2-3ç¯‡æŠ€æœ¯åšå®¢ï¼Œæ¯ç¯‡åŒ…å«5-10å¼ å›¾ç‰‡
- ç—›ç‚¹ï¼šåœ¨CSDNã€æ˜é‡‘ã€åšå®¢å›­å¤šå¹³å°å‘å¸ƒï¼Œéœ€è¦é‡å¤å¤„ç†å›¾ç‰‡

**å…¸å‹ç”¨æˆ·B - äº§å“ç»ç†**
- å¹´é¾„ï¼š28-40å²
- èŒä¸šï¼šäº§å“ç»ç†
- éœ€æ±‚ï¼šæ—¥å¸¸ä½¿ç”¨Markdownç¼–å†™PRDæ–‡æ¡£
- ç—›ç‚¹ï¼šæ–‡æ¡£åˆ†äº«ç»™å›¢é˜Ÿæ—¶ï¼Œæœ¬åœ°å›¾ç‰‡æ— æ³•æ˜¾ç¤º

## 3. åŠŸèƒ½éœ€æ±‚

### 3.1 æ ¸å¿ƒåŠŸèƒ½

#### 3.1.1 å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼šå°†æœ¬åœ°å›¾ç‰‡ä¸Šä¼ åˆ°é˜¿é‡Œäº‘OSSï¼Œå¹¶è¿”å›è®¿é—®é“¾æ¥

**è¾“å…¥**ï¼š
- æœ¬åœ°å›¾ç‰‡æ–‡ä»¶è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„ï¼‰
- æ”¯æŒæ ¼å¼ï¼špng, jpg, jpeg, gif, svg, webp

**è¾“å‡º**ï¼š
- é˜¿é‡Œäº‘OSSå›¾ç‰‡è®¿é—®URL
- Markdownæ ¼å¼é“¾æ¥ï¼š`![å›¾ç‰‡æè¿°](https://oss-url/xxx.png)`

**ä¸šåŠ¡è§„åˆ™**ï¼š
- å›¾ç‰‡è‡ªåŠ¨é‡å‘½åï¼ˆUUID + åŸå§‹æ‰©å±•åï¼‰
- æ”¯æŒè‡ªå®šä¹‰å­˜å‚¨è·¯å¾„å‰ç¼€
- è‡ªåŠ¨æ£€æµ‹å¹¶è·³è¿‡å·²ä¸Šä¼ çš„å›¾ç‰‡ï¼ˆåŸºäºæ–‡ä»¶MD5ï¼‰
- ä¸Šä¼ å¤±è´¥è‡ªåŠ¨é‡è¯•ï¼ˆæœ€å¤š3æ¬¡ï¼‰

#### 3.1.2 æ‰¹é‡ä¸Šä¼ åŠŸèƒ½

**åŠŸèƒ½æè¿°**ï¼šæ‰¹é‡ä¸Šä¼ å¤šå¼ å›¾ç‰‡ï¼Œæ”¯æŒæ–‡ä»¶å¤¹æ‰«æ

**è¾“å…¥**ï¼š
- å›¾ç‰‡æ–‡ä»¶å¤¹è·¯å¾„
- å›¾ç‰‡æ–‡ä»¶è·¯å¾„åˆ—è¡¨

**è¾“å‡º**ï¼š
- æ‰€æœ‰å›¾ç‰‡çš„Markdowné“¾æ¥åˆ—è¡¨
- ä¸Šä¼ æˆåŠŸ/å¤±è´¥ç»Ÿè®¡æŠ¥å‘Š

**ä¸šåŠ¡è§„åˆ™**ï¼š
- é€’å½’æ‰«æå­æ–‡ä»¶å¤¹
- è¿‡æ»¤éå›¾ç‰‡æ–‡ä»¶
- å¹¶å‘ä¸Šä¼ ï¼ˆé»˜è®¤5ä¸ªå¹¶å‘ï¼‰
- è¿›åº¦æ¡æ˜¾ç¤º

#### 3.1.3 Markdownæ–‡æ¡£å¤„ç†

**åŠŸèƒ½æè¿°**ï¼šæ‰«æMarkdownæ–‡æ¡£ï¼Œè‡ªåŠ¨ä¸Šä¼ æœ¬åœ°å›¾ç‰‡å¹¶æ›¿æ¢ä¸ºå›¾åºŠé“¾æ¥

**è¾“å…¥**ï¼š
- Markdownæ–‡ä»¶è·¯å¾„
- æˆ–åŒ…å«å¤šä¸ªMarkdownæ–‡ä»¶çš„æ–‡ä»¶å¤¹

**è¾“å‡º**ï¼š
- æ›´æ–°åçš„Markdownæ–‡ä»¶ï¼ˆåŸæ–‡ä»¶å¤‡ä»½ï¼‰
- å›¾ç‰‡ä¸Šä¼ è®°å½•

**ä¸šåŠ¡è§„åˆ™**ï¼š
- è¯†åˆ«Markdownä¸­çš„æœ¬åœ°å›¾ç‰‡å¼•ç”¨ï¼š`![](./images/xxx.png)`
- è‡ªåŠ¨ä¸Šä¼ æœ¬åœ°å›¾ç‰‡
- æ›¿æ¢ä¸ºå›¾åºŠé“¾æ¥
- ä¿ç•™åŸæ–‡ä»¶å¤‡ä»½ï¼ˆ.bakåç¼€ï¼‰

#### 3.1.4 é…ç½®ç®¡ç†

**åŠŸèƒ½æè¿°**ï¼šç®¡ç†é˜¿é‡Œäº‘OSSè®¿é—®å‡­è¯å’Œä¸Šä¼ é…ç½®

**é…ç½®é¡¹**ï¼š
```yaml
aliyun:
  access_key_id: "your-access-key-id"
  access_key_secret: "your-access-key-secret"
  endpoint: "oss-cn-beijing.aliyuncs.com"
  bucket_name: "your-bucket-name"
  
upload:
  path_prefix: "images/{year}/{month}/"  # ä¸Šä¼ è·¯å¾„å‰ç¼€
  enable_md5_check: true                 # å¯ç”¨MD5å»é‡
  concurrent_limit: 5                    # å¹¶å‘ä¸Šä¼ æ•°
  retry_times: 3                         # é‡è¯•æ¬¡æ•°
  
markdown:
  backup_original: true                  # æ˜¯å¦å¤‡ä»½åŸæ–‡ä»¶
  image_alt_text: "image"               # é»˜è®¤å›¾ç‰‡æè¿°æ–‡å­—
```

### 3.2 è¾…åŠ©åŠŸèƒ½

#### 3.2.1 å›¾ç‰‡ç®¡ç†

- åˆ—å‡ºOSSä¸Šå·²ä¸Šä¼ çš„å›¾ç‰‡
- åˆ é™¤æŒ‡å®šå›¾ç‰‡
- æŸ¥çœ‹å›¾ç‰‡ä¸Šä¼ è®°å½•

#### 3.2.2 ä½¿ç”¨ç»Ÿè®¡

- ä¸Šä¼ å›¾ç‰‡æ•°é‡ç»Ÿè®¡
- å­˜å‚¨ç©ºé—´å ç”¨
- æµé‡ä½¿ç”¨æƒ…å†µ
- è´¹ç”¨ä¼°ç®—

#### 3.2.3 å‘½ä»¤è¡Œå·¥å…·

æä¾›CLIå‘½ä»¤è¡Œå·¥å…·ï¼Œæ”¯æŒï¼š
```bash
# ä¸Šä¼ å•å¼ å›¾ç‰‡
oss-image upload /path/to/image.png

# æ‰¹é‡ä¸Šä¼ 
oss-image upload-batch /path/to/images/

# å¤„ç†Markdownæ–‡æ¡£
oss-image convert /path/to/document.md

# æŸ¥çœ‹é…ç½®
oss-image config show

# æŸ¥çœ‹ç»Ÿè®¡
oss-image stats
```

## 4. æŠ€æœ¯æ–¹æ¡ˆ

### 4.1 æŠ€æœ¯æ ˆé€‰å‹

| æŠ€æœ¯é¡¹ | é€‰å‹ | è¯´æ˜ |
|--------|------|------|
| å¼€å‘è¯­è¨€ | Python 3.8+ | ä¸°å¯Œçš„OSS SDKï¼Œæ˜“äºå¼€å‘ |
| OSS SDK | aliyun-python-sdk-oss | é˜¿é‡Œäº‘å®˜æ–¹SDK |
| CLIæ¡†æ¶ | Click | ä¼˜ç§€çš„å‘½ä»¤è¡Œå·¥å…·æ¡†æ¶ |
|é…ç½®ç®¡ç† | YAML | æ˜“è¯»æ˜“å†™çš„é…ç½®æ ¼å¼ |
| è¿›åº¦æ˜¾ç¤º | tqdm | ç¾è§‚çš„è¿›åº¦æ¡ |
| å¹¶å‘å¤„ç† | concurrent.futures | Pythonæ ‡å‡†åº“ |

### 4.2 ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç”¨æˆ·äº¤äº’å±‚                     â”‚
â”‚  (CLIå‘½ä»¤ / Python SDK / Webç•Œé¢)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ä¸šåŠ¡é€»è¾‘å±‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚å›¾ç‰‡ä¸Šä¼   â”‚  â”‚Markdown  â”‚  â”‚é…ç½®   â”‚ â”‚
â”‚  â”‚  æ¨¡å—    â”‚  â”‚  å¤„ç†    â”‚  â”‚ç®¡ç†   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         OSSæœåŠ¡å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   é˜¿é‡Œäº‘OSS Python SDK            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é˜¿é‡Œäº‘OSSå¯¹è±¡å­˜å‚¨                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 æ ¸å¿ƒæ¨¡å—è®¾è®¡

#### 4.3.1 å›¾ç‰‡ä¸Šä¼ æ¨¡å—ï¼ˆImageUploaderï¼‰

```python
class ImageUploader:
    """å›¾ç‰‡ä¸Šä¼ æ ¸å¿ƒç±»"""
    
    def __init__(self, config):
        """åˆå§‹åŒ–OSSå®¢æˆ·ç«¯"""
        pass
    
    def upload_single(self, local_path: str) -> dict:
        """ä¸Šä¼ å•å¼ å›¾ç‰‡
        
        Args:
            local_path: æœ¬åœ°å›¾ç‰‡è·¯å¾„
            
        Returns:
            {
                'success': True,
                'url': 'https://xxx.oss-cn-beijing.aliyuncs.com/xxx.png',
                'markdown': '![image](https://xxx.png)',
                'md5': 'xxx',
                'size': 102400
            }
        """
        pass
    
    def upload_batch(self, image_paths: List[str]) -> List[dict]:
        """æ‰¹é‡ä¸Šä¼ å›¾ç‰‡"""
        pass
    
    def _generate_oss_key(self, local_path: str) -> str:
        """ç”ŸæˆOSSå­˜å‚¨è·¯å¾„"""
        pass
    
    def _calculate_md5(self, file_path: str) -> str:
        """è®¡ç®—æ–‡ä»¶MD5"""
        pass
```

#### 4.3.2 Markdownå¤„ç†æ¨¡å—ï¼ˆMarkdownProcessorï¼‰

```python
class MarkdownProcessor:
    """Markdownæ–‡æ¡£å¤„ç†ç±»"""
    
    def __init__(self, uploader: ImageUploader):
        """åˆå§‹åŒ–"""
        pass
    
    def process_file(self, md_path: str) -> dict:
        """å¤„ç†å•ä¸ªMarkdownæ–‡ä»¶
        
        Args:
            md_path: Markdownæ–‡ä»¶è·¯å¾„
            
        Returns:
            {
                'success': True,
                'processed_images': 5,
                'failed_images': 0,
                'backup_path': '/path/to/file.md.bak'
            }
        """
        pass
    
    def _extract_local_images(self, content: str) -> List[str]:
        """æå–æœ¬åœ°å›¾ç‰‡è·¯å¾„"""
        pass
    
    def _replace_image_links(self, content: str, 
                           replacements: dict) -> str:
        """æ›¿æ¢å›¾ç‰‡é“¾æ¥"""
        pass
```

### 4.4 æ•°æ®åº“è®¾è®¡ï¼ˆå¯é€‰ï¼‰

**ä¸Šä¼ è®°å½•è¡¨ï¼ˆupload_recordsï¼‰**

| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| id | INTEGER | ä¸»é”® |
| local_path | TEXT | æœ¬åœ°è·¯å¾„ |
| oss_url | TEXT | OSSè®¿é—®URL |
| oss_key | TEXT | OSSå¯¹è±¡é”® |
| file_md5 | TEXT | æ–‡ä»¶MD5 |
| file_size | INTEGER | æ–‡ä»¶å¤§å°ï¼ˆå­—èŠ‚ï¼‰ |
| upload_time | TIMESTAMP | ä¸Šä¼ æ—¶é—´ |
| status | TEXT | çŠ¶æ€ï¼ˆsuccess/failedï¼‰ |

## 5. ä½¿ç”¨æµç¨‹

### 5.1 åˆæ¬¡é…ç½®æµç¨‹

```mermaid
graph LR
    A[å®‰è£…ç¨‹åº] --> B[è¿è¡Œé…ç½®å‘å¯¼]
    B --> C[è¾“å…¥é˜¿é‡Œäº‘å‡­è¯]
    C --> D[é€‰æ‹©OSSåŒºåŸŸ]
    D --> E[è¾“å…¥Bucketåç§°]
    E --> F[æµ‹è¯•è¿æ¥]
    F --> G{è¿æ¥æˆåŠŸ?}
    G -->|æ˜¯| H[ä¿å­˜é…ç½®]
    G -->|å¦| C
    H --> I[å¼€å§‹ä½¿ç”¨]
```

### 5.2 å›¾ç‰‡ä¸Šä¼ æµç¨‹

```mermaid
graph TD
    A[é€‰æ‹©å›¾ç‰‡] --> B{å›¾ç‰‡ç±»å‹æ£€æŸ¥}
    B -->|ä¸æ”¯æŒ| C[æç¤ºé”™è¯¯]
    B -->|æ”¯æŒ| D[è®¡ç®—MD5]
    D --> E{æ˜¯å¦å·²ä¸Šä¼ ?}
    E -->|æ˜¯| F[è¿”å›å·²æœ‰é“¾æ¥]
    E -->|å¦| G[ç”ŸæˆOSS Key]
    G --> H[ä¸Šä¼ åˆ°OSS]
    H --> I{ä¸Šä¼ æˆåŠŸ?}
    I -->|å¦| J[é‡è¯•/æŠ¥é”™]
    I -->|æ˜¯| K[è®°å½•ä¸Šä¼ ä¿¡æ¯]
    K --> L[è¿”å›Markdowné“¾æ¥]
```

### 5.3 Markdownæ–‡æ¡£å¤„ç†æµç¨‹

```mermaid
graph TD
    A[è¯»å–Markdownæ–‡ä»¶] --> B[å¤‡ä»½åŸæ–‡ä»¶]
    B --> C[æå–æœ¬åœ°å›¾ç‰‡å¼•ç”¨]
    C --> D{æœ‰æœ¬åœ°å›¾ç‰‡?}
    D -->|å¦| E[ç»“æŸå¤„ç†]
    D -->|æ˜¯| F[ä¸Šä¼ å›¾ç‰‡åˆ°OSS]
    F --> G[æ›¿æ¢ä¸ºå›¾åºŠé“¾æ¥]
    G --> H[ä¿å­˜æ›´æ–°åçš„æ–‡ä»¶]
    H --> I[è¾“å‡ºå¤„ç†æŠ¥å‘Š]
```

## 6. æ¥å£è®¾è®¡

### 6.1 Python SDKæ¥å£

```python
from oss_image_bed import OSSImageBed

# åˆå§‹åŒ–
client = OSSImageBed(config_path='~/.oss_config.yaml')

# ä¸Šä¼ å•å¼ å›¾ç‰‡
result = client.upload_image('/path/to/image.png')
# è¿”å›: {
#     'url': 'https://...',
#     'markdown': '![image](https://...)',
#     'success': True
# }

# æ‰¹é‡ä¸Šä¼ 
results = client.upload_images([
    '/path/to/image1.png',
    '/path/to/image2.jpg'
])

# å¤„ç†Markdownæ–‡æ¡£
report = client.process_markdown('/path/to/document.md')

# è·å–ç»Ÿè®¡ä¿¡æ¯
stats = client.get_stats()
```

### 6.2 CLIå‘½ä»¤æ¥å£

```bash
# åˆå§‹åŒ–é…ç½®
oss-image init

# ä¸Šä¼ å•å¼ å›¾ç‰‡
oss-image upload <image_path>
oss-image upload /Users/rick/screenshot.png

# æ‰¹é‡ä¸Šä¼ 
oss-image upload-batch <folder_path>
oss-image upload-batch /Users/rick/images/

# å¤„ç†Markdownæ–‡æ¡£
oss-image convert <markdown_path>
oss-image convert README.md
oss-image convert docs/  # å¤„ç†æ•´ä¸ªæ–‡ä»¶å¤¹

# æŸ¥çœ‹é…ç½®
oss-image config show
oss-image config set endpoint oss-cn-beijing.aliyuncs.com

# æŸ¥çœ‹ä¸Šä¼ è®°å½•
oss-image list --limit 10

# æŸ¥çœ‹ç»Ÿè®¡
oss-image stats

# åˆ é™¤å›¾ç‰‡
oss-image delete <oss_key>
```

## 7. éåŠŸèƒ½æ€§éœ€æ±‚

### 7.1 æ€§èƒ½éœ€æ±‚

- å•å¼ å›¾ç‰‡ä¸Šä¼ æ—¶é—´ < 3ç§’ï¼ˆ1MBå›¾ç‰‡ï¼‰
- æ‰¹é‡ä¸Šä¼ æ”¯æŒå¹¶å‘ï¼Œæå‡50%æ•ˆç‡
- Markdownæ–‡æ¡£å¤„ç†é€Ÿåº¦ > 100å¼ å›¾ç‰‡/åˆ†é’Ÿ

### 7.2 å®‰å…¨éœ€æ±‚

- AccessKeyåŠ å¯†å­˜å‚¨åœ¨æœ¬åœ°é…ç½®æ–‡ä»¶
- æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡é…ç½®æ•æ„Ÿä¿¡æ¯
- OSS Bucketå»ºè®®å¼€å¯ç§æœ‰è¯»å†™ï¼Œé€šè¿‡ç­¾åURLè®¿é—®
- é…ç½®æ–‡ä»¶æƒé™æ£€æŸ¥ï¼ˆä»…ç”¨æˆ·å¯è¯»å†™ï¼‰

### 7.3 å¯é æ€§éœ€æ±‚

- ä¸Šä¼ å¤±è´¥è‡ªåŠ¨é‡è¯•æœºåˆ¶
- ç½‘ç»œå¼‚å¸¸æ—¶çš„é”™è¯¯æç¤ºå’Œæ¢å¤å»ºè®®
- å®Œæ•´çš„æ—¥å¿—è®°å½•ï¼ˆé»˜è®¤ä¿å­˜åœ¨~/.oss_image_bed/logs/ï¼‰
- åŸå§‹æ–‡ä»¶è‡ªåŠ¨å¤‡ä»½ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±

### 7.4 æ˜“ç”¨æ€§éœ€æ±‚

- æä¾›è¯¦ç»†çš„å®‰è£…å’Œé…ç½®æ–‡æ¡£
- å‹å¥½çš„é”™è¯¯æç¤ºä¿¡æ¯
- è¿›åº¦æ¡æ˜¾ç¤ºä¸Šä¼ è¿›åº¦
- æ”¯æŒé…ç½®å‘å¯¼ï¼ˆäº¤äº’å¼é…ç½®ï¼‰

## 8. é…ç½®è¯´æ˜

### 8.1 é˜¿é‡Œäº‘OSSå‡†å¤‡

**æ­¥éª¤1ï¼šå¼€é€šOSSæœåŠ¡**
1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. å¼€é€šå¯¹è±¡å­˜å‚¨OSSæœåŠ¡
3. é€‰æ‹©æŒ‰é‡ä»˜è´¹æ¨¡å¼

**æ­¥éª¤2ï¼šåˆ›å»ºBucket**
1. è¿›å…¥OSSç®¡ç†æ§åˆ¶å°
2. åˆ›å»ºBucketï¼Œé€‰æ‹©åŒºåŸŸï¼ˆå»ºè®®é€‰æ‹©è·ç¦»è¿‘çš„åŒºåŸŸï¼‰
3. æƒé™è®¾ç½®ï¼š
   - è¯»å†™æƒé™ï¼šç§æœ‰ï¼ˆæ¨èï¼‰æˆ–å…¬å…±è¯»
   - æœåŠ¡ç«¯åŠ å¯†ï¼šå¯é€‰

**æ­¥éª¤3ï¼šè·å–AccessKey**
1. ç‚¹å‡»ç”¨æˆ·å¤´åƒ â†’ AccessKeyç®¡ç†
2. åˆ›å»ºAccessKeyï¼ˆå»ºè®®ä½¿ç”¨RAMå­è´¦å·ï¼‰
3. è®°å½•AccessKey IDå’ŒAccessKey Secret

### 8.2 é…ç½®æ–‡ä»¶è¯´æ˜

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.oss_image_bed/config.yaml`

```yaml
# é˜¿é‡Œäº‘OSSé…ç½®
aliyun:
  access_key_id: "LTAI5tXXXXXXXXXXXXXX"
  access_key_secret: "3vXXXXXXXXXXXXXXXXXXXXXXXXXX"
  endpoint: "oss-cn-beijing.aliyuncs.com"
  bucket_name: "my-image-bed"
  # å¯é€‰ï¼šè‡ªå®šä¹‰åŸŸåï¼ˆç»‘å®šåä½¿ç”¨ï¼‰
  custom_domain: "https://img.yourdomain.com"

# ä¸Šä¼ é…ç½®
upload:
  # è·¯å¾„å‰ç¼€ï¼Œæ”¯æŒå˜é‡: {year}, {month}, {day}
  path_prefix: "images/{year}/{month}/"
  
  # æ–‡ä»¶å‘½åè§„åˆ™: uuid, timestamp, original
  naming_rule: "uuid"
  
  # æ˜¯å¦å¯ç”¨MD5å»é‡
  enable_md5_check: true
  
  # å¹¶å‘ä¸Šä¼ æ•°é‡
  concurrent_limit: 5
  
  # å¤±è´¥é‡è¯•æ¬¡æ•°
  retry_times: 3
  
  # æ”¯æŒçš„å›¾ç‰‡æ ¼å¼
  allowed_formats: [".png", ".jpg", ".jpeg", ".gif", ".svg", ".webp"]

# Markdownå¤„ç†é…ç½®  
markdown:
  # æ˜¯å¦å¤‡ä»½åŸæ–‡ä»¶
  backup_original: true
  
  # å¤‡ä»½æ–‡ä»¶åç¼€
  backup_suffix: ".bak"
  
  # é»˜è®¤å›¾ç‰‡æè¿°
  image_alt_text: "image"
  
  # æ˜¯å¦é€’å½’å¤„ç†å­æ–‡ä»¶å¤¹
  recursive: true

# æ—¥å¿—é…ç½®
logging:
  # æ—¥å¿—çº§åˆ«: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # æ—¥å¿—æ–‡ä»¶è·¯å¾„
  file_path: "~/.oss_image_bed/logs/app.log"
  
  # æ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°ï¼ˆMBï¼‰
  max_size: 10
  
  # ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶æ•°é‡
  backup_count: 5
```

## 9. è´¹ç”¨ä¼°ç®—

### 9.1 é˜¿é‡Œäº‘OSSè´¹ç”¨æ„æˆ

| è´¹ç”¨é¡¹ | è®¡è´¹æ–¹å¼ | å‚è€ƒä»·æ ¼ï¼ˆååŒ—2-åŒ—äº¬ï¼‰ |
|--------|----------|----------------------|
| å­˜å‚¨è´¹ç”¨ | æŒ‰GB/æœˆ | 0.12å…ƒ/GB/æœˆ |
| æµé‡è´¹ç”¨ | æŒ‰GB | å¤–ç½‘æµå‡ºæµé‡ 0.50å…ƒ/GB |
| è¯·æ±‚è´¹ç”¨ | æŒ‰æ¬¡æ•° | GETè¯·æ±‚ 0.01å…ƒ/ä¸‡æ¬¡ |

### 9.2 å…¸å‹ä½¿ç”¨åœºæ™¯è´¹ç”¨

**ä¸ªäººåšå®¢åœºæ™¯**
- å­˜å‚¨ï¼š500å¼ å›¾ç‰‡ï¼Œå¹³å‡200KBï¼Œçº¦100MB = 0.012å…ƒ/æœˆ
- æµé‡ï¼šæœˆè®¿é—®1000æ¬¡ï¼Œæ¯æ¬¡åŠ è½½10å¼ å›¾ç‰‡ = 2GB = 1å…ƒ/æœˆ
- è¯·æ±‚ï¼š10000æ¬¡GET = 0.01å…ƒ/æœˆ
- **æœˆè´¹ç”¨åˆè®¡ï¼šçº¦1-2å…ƒ**

**æŠ€æœ¯åšä¸»åœºæ™¯**
- å­˜å‚¨ï¼š2000å¼ å›¾ç‰‡ï¼Œçº¦500MB = 0.06å…ƒ/æœˆ  
- æµé‡ï¼šæœˆè®¿é—®5000æ¬¡ = 10GB = 5å…ƒ/æœˆ
- **æœˆè´¹ç”¨åˆè®¡ï¼šçº¦5-6å…ƒ**

### 9.3 æˆæœ¬ä¼˜åŒ–å»ºè®®

1. å¼€å¯CDNåŠ é€Ÿå¯é™ä½æµé‡è´¹ç”¨
2. ä½¿ç”¨å›¾ç‰‡å‹ç¼©å‡å°‘å­˜å‚¨å’Œæµé‡
3. è®¾ç½®ç”Ÿå‘½å‘¨æœŸè§„åˆ™ï¼Œè‡ªåŠ¨åˆ é™¤è¿‡æœŸå›¾ç‰‡
4. é€‰æ‹©è·ç¦»è¿‘çš„åŒºåŸŸå‡å°‘å»¶è¿Ÿ

## 10. åç»­è§„åˆ’

### 10.1 Version 1.0ï¼ˆMVPï¼‰

- âœ… åŸºç¡€å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
- âœ… Markdownæ–‡æ¡£å¤„ç†
- âœ… CLIå‘½ä»¤è¡Œå·¥å…·
- âœ… é…ç½®ç®¡ç†

### 10.2 Version 1.1

- ğŸ“‹ Webå¯è§†åŒ–ç®¡ç†ç•Œé¢
- ğŸ“‹ å›¾ç‰‡å‹ç¼©åŠŸèƒ½
- ğŸ“‹ å†å²è®°å½•ç®¡ç†ï¼ˆSQLiteï¼‰
- ğŸ“‹ æ‰¹é‡ä¸‹è½½åŠŸèƒ½

### 10.3 Version 2.0

- ğŸ“‹ æ”¯æŒå…¶ä»–äº‘æœåŠ¡å•†ï¼ˆè…¾è®¯äº‘COSã€ä¸ƒç‰›äº‘ï¼‰
- ğŸ“‹ å›¾ç‰‡CDNåŠ é€Ÿé…ç½®
- ğŸ“‹ å›¢é˜Ÿåä½œåŠŸèƒ½
- ğŸ“‹ æµè§ˆå™¨æ’ä»¶ï¼ˆå³é”®ä¸Šä¼ ï¼‰
- ğŸ“‹ Typora/VSCodeæ’ä»¶é›†æˆ

## 11. é™„å½•

### 11.1 å‚è€ƒèµ„æ–™

- [é˜¿é‡Œäº‘OSS Python SDKæ–‡æ¡£](https://help.aliyun.com/document_detail/32026.html)
- [Markdownè¯­æ³•è§„èŒƒ](https://www.markdownguide.org/)
- [Clickå‘½ä»¤è¡Œæ¡†æ¶](https://click.palletsprojects.com/)

### 11.2 å¸¸è§é—®é¢˜

**Q1: ä¸Šä¼ å¤±è´¥æ€ä¹ˆåŠï¼Ÿ**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥ã€AccessKeyé…ç½®ã€Bucketæƒé™è®¾ç½®

**Q2: å¦‚ä½•å¤‡ä»½å›¾ç‰‡ï¼Ÿ**  
A: å¯ä»¥å®šæœŸä½¿ç”¨`oss-image backup`å‘½ä»¤å°†OSSå›¾ç‰‡ä¸‹è½½åˆ°æœ¬åœ°

**Q3: æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ**
A: é»˜è®¤æ”¯æŒ png, jpg, jpeg, gif, svg, webpï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰

**Q4: å¦‚ä½•åˆ é™¤OSSä¸Šçš„å›¾ç‰‡ï¼Ÿ**
A: ä½¿ç”¨`oss-image delete <oss_key>`å‘½ä»¤

### 11.3 æŠ€æœ¯æ”¯æŒ

- GitHub Issues: https://github.com/xxx/oss-image-bed/issues
- ä½¿ç”¨æ–‡æ¡£: https://xxx.github.io/oss-image-bed
- Email: support@example.com

---

**æ–‡æ¡£ç»“æŸ**
