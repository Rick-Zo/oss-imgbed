# 🎉 项目配置完成说明

## ✅ 已完成的工作

### 1. 项目结构已搭建 ✓

```
aliyun-oss-image-bed/
├── config.yaml              # ⭐ 配置文件（需填写 AccessKey）
├── src/oss_image_bed/       # 核心代码
│   ├── __init__.py
│   ├── config.py           # 配置管理
│   ├── uploader.py         # 图片上传
│   ├── processor.py        # Markdown处理
│   ├── utils.py            # 工具函数
│   └── cli.py              # 命令行工具
├── logs/                   # 日志目录
├── cache/                  # 缓存目录
├── example_test.py         # 测试脚本
├── 快速配置指南.md         # ⭐ 5分钟上手指南
├── USAGE.md               # 详细使用文档
└── README.md              # 项目说明
```

### 2. 依赖已安装 ✓

- ✅ oss2 (阿里云OSS SDK)
- ✅ click (命令行工具)
- ✅ PyYAML (配置文件)
- ✅ tqdm (进度条)
- ✅ colorlog (日志)
- ✅ Pillow (图片处理)
- ✅ tabulate (表格显示)
- ✅ pyperclip (剪贴板)

### 3. 命令行工具已安装 ✓

可以直接使用 `oss-image` 命令：

```bash
oss-image --help
oss-image config test
oss-image upload image.png
```

### 4. 配置文件已创建 ✓

位置：`/Users/rick/Documents/AI产品开发/aliyun-oss-image-bed/config.yaml`

已为你预配置：
- ✅ endpoint: `oss-cn-guangzhou.aliyuncs.com`
- ✅ bucket_name: `rickzo`
- ✅ 上传路径：`images/{year}/{month}/`
- ✅ 文件命名：UUID（避免冲突）
- ✅ MD5去重：已启用

## ⚠️ 下一步：填写 AccessKey

打开 `config.yaml` 文件，填写你的阿里云 AccessKey：

```yaml
aliyun:
  # 👇 改成你的 AccessKey ID
  access_key_id: "your-access-key-id"
  
  # 👇 改成你的 AccessKey Secret
  access_key_secret: "your-access-key-secret"
```

### 在哪里找到 AccessKey？

**方式1：直接访问**
👉 https://oss.console.aliyun.com/bucket/oss-cn-guangzhou/rickzo/permission/ram

**方式2：控制台导航**
1. 登录阿里云控制台
2. 访问控制 RAM → 用户管理
3. 选择你的用户 → 认证管理
4. 查看或创建 AccessKey

## 🧪 测试配置

配置完成后，运行测试：

```bash
# 进入项目目录
cd /Users/rick/Documents/AI产品开发/aliyun-oss-image-bed

# 方式1：使用命令行工具测试
oss-image config test

# 方式2：运行测试脚本
python example_test.py
```

**期望输出：**
```
✅ 配置文件加载成功
✅ OSS 连接成功
✨ 所有测试通过！配置正确，可以开始使用了！
```

## 🚀 开始使用

### 上传图片示例

```bash
# 1. 上传单张图片
oss-image upload ~/Desktop/screenshot.png

# 输出：
# ✅ 上传成功！
# 📋 Markdown: ![image](https://rickzo.oss-cn-guangzhou.aliyuncs.com/images/2025/11/xxx.png)
# ✨ Markdown链接已复制到剪贴板
```

### 处理 Markdown 文档

假设你有一个 `README.md` 文件：

```markdown
# 我的项目

这是一张截图：
![截图](./images/screenshot.png)
```

运行：

```bash
oss-image convert README.md
```

文档会自动变成：

```markdown
# 我的项目

这是一张截图：
![截图](https://rickzo.oss-cn-guangzhou.aliyuncs.com/images/2025/11/xxx.png)
```

## 📚 学习资源

1. **快速入门**（5分钟）
   - 阅读：[快速配置指南.md](快速配置指南.md)
   
2. **详细使用**（15分钟）
   - 阅读：[USAGE.md](USAGE.md)
   
3. **命令参考**
   ```bash
   oss-image --help          # 查看所有命令
   oss-image upload --help   # 查看上传命令帮助
   ```

## 🎯 常见使用场景

### 场景1：博客写作

```bash
# 写博客时截图保存到桌面
# 上传图片
oss-image upload ~/Desktop/Screenshot*.png

# 粘贴 Markdown 链接到博客
```

### 场景2：文档迁移

```bash
# 将整个文档目录的本地图片迁移到 OSS
oss-image convert ./docs/

# 所有 .md 文件中的本地图片会自动上传并替换链接
```

### 场景3：批量图片上传

```bash
# 上传整个图片文件夹
oss-image upload-batch ./images/

# 会显示进度条和上传结果
```

## ⚙️ Bucket 权限设置建议

为了让图片链接可以直接访问，建议设置为**公共读**：

1. 访问：https://oss.console.aliyun.com/bucket/oss-cn-guangzhou/rickzo/permission/acl
2. 将"读写权限"设置为：**公共读**
3. 这样图片URL可以在任何地方访问

## 💰 费用预估

根据你的使用情况：

- **个人博客**：约 1-2 元/月
  - 100MB 存储 + 1GB 流量
  
- **活跃写作**：约 3-5 元/月
  - 500MB 存储 + 5GB 流量

费用明细：
- 存储：0.12元/GB/月
- 流量：0.50元/GB
- 请求：0.01元/万次

## 🔒 安全提示

1. ✅ `config.yaml` 已添加到 `.gitignore`，不会被提交到 git
2. ⚠️ 不要将配置文件分享给他人
3. ⚠️ 不要将 AccessKey 提交到公开仓库
4. 💡 建议定期轮换 AccessKey

## 🐛 遇到问题？

### Q1: 提示 "配置文件不存在"

**解决**：确保在项目根目录运行命令
```bash
cd /Users/rick/Documents/AI产品开发/aliyun-oss-image-bed
```

### Q2: 提示 "权限不足"

**解决**：检查 RAM 用户权限，确保有 OSS 读写权限

### Q3: 图片链接无法访问

**解决**：将 Bucket 权限改为"公共读"

### 查看日志

```bash
# 日志文件位置
cat logs/app.log
```

## ✨ 完成！

现在你可以：

- ✅ 上传图片到阿里云 OSS
- ✅ 获取 Markdown 格式的图床链接
- ✅ 自动转换 Markdown 文档中的本地图片
- ✅ 使用稳定可靠的图床服务

祝你使用愉快！🎉

---

**下次使用时：**

1. 进入项目目录：`cd /Users/rick/Documents/AI产品开发/aliyun-oss-image-bed`
2. 直接使用命令：`oss-image upload image.png`

**技术支持：**

- 查看文档：`USAGE.md`
- 查看日志：`logs/app.log`
- 运行测试：`python example_test.py`

